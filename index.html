
<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AuraCare Demo - Korjattu</title>
</head>
<body>
    <h1>AuraCare - Ã„Ã¤nitoimintojen Demo</h1>

    <button onclick="startMainVoiceDemo()" id="mainVoiceBtn">ðŸŽ¤ Kokeile Ã¤Ã¤nitoimintoja</button>
    <p id="voiceStatus">Odottamassa</p>

    <script>
        let currentRecognition = null;

        function getSpeechRecognition() {
            return window.SpeechRecognition || window.webkitSpeechRecognition || null;
        }

        function startMainVoiceDemo() {
            const SpeechRecognition = getSpeechRecognition();

            if (!SpeechRecognition) {
                alert("Puheentunnistus ei ole tuettu selaimessasi.");
                return;
            }

            currentRecognition = new SpeechRecognition();
            currentRecognition.lang = 'fi-FI';

            document.getElementById('mainVoiceBtn').innerText = "ðŸŽ¤ Kuuntelee...";
            document.getElementById('voiceStatus').innerText = "Kuuntelee...";

            currentRecognition.onresult = function(event) {
                const transcript = event.results[0][0].transcript;
                document.getElementById('voiceStatus').innerText = "Tunnistettu: " + transcript;
            };

            currentRecognition.onend = function() {
                stopAllVoice();
            };

            currentRecognition.start();
        }

        function stopAllVoice() {
            if (currentRecognition) {
                currentRecognition.stop();
                currentRecognition = null;
            }

            document.getElementById('mainVoiceBtn').innerText = "ðŸŽ¤ Kokeile Ã¤Ã¤nitoimintoja";
            document.getElementById('voiceStatus').innerText = "Odottamassa";
        }

        function testAudio() {
            console.log('ðŸ”Š Testataan Ã¤Ã¤ni...');
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance('TestiÃ¤Ã¤ni toimii!');
                utterance.lang = 'fi-FI';
                speechSynthesis.speak(utterance);
            } else {
                alert("Puhesynteesi ei ole tuettu selaimessasi.");
            }
        }
    </script>
</body>
</html>
